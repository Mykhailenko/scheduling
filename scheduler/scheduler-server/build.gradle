repositories {
    if (project.hasProperty('local')) mavenLocal()

    maven {
        url "http://repository.activeeon.com/content/groups/proactive/"
    }
}

apply plugin: 'java-library-distribution'

dependencies {
    compile 'commons-cli:commons-cli:1.3.1'
    compile 'commons-io:commons-io:2.5'
    compile 'javax.mail:mail:1.4.7'
    compile 'joda-time:joda-time:2.9.1'
    compile 'org.apache.commons:commons-lang3:3.4'

    compile "org.ow2.proactive:emailnotification-addons:${schedulingVersion}"

    compile 'org.eclipse.jetty:jetty-webapp:9.2.14.v20151106'
    compile "org.objectweb.proactive:programming-core:${programmingVersion}"

    compile project(':common:common-api')
    compile project(':common:common-client')
    compile project(':common:common-db')
    compile project(':common:common-http')
    compile project(':scheduler:scheduler-api')
    compile project(':scheduler:scheduler-client')
    compile project(':scheduler:scheduler-node')
    compile project(':rm:rm-server')
    compile project(':rm:rm-client')




    testCompile "com.google.jimfs:jimfs:1.1"
    testCompile "org.objectweb.proactive:programming-extension-pnp:${programmingVersion}"
    testCompile "org.objectweb.proactive:programming-extension-pnpssl:${programmingVersion}"
    testCompile 'org.mockito:mockito-core:1.10.19'
    testCompile 'org.hamcrest:hamcrest-all:1.3'
    testCompile 'org.apache.jmeter:ApacheJMeter_junit:3.3'
    testCompile 'org.apache.jmeter:ApacheJMeter_java:3.3'

    testCompile 'org.codehaus.groovy:groovy-all:2.4.12'

    testCompile 'org.jvnet.winp:winp:1.24'
    testCompile files("${System.properties['java.home']}/../lib/tools.jar")

    testCompile project(':rm:rm-server').sourceSets.test.output // to get shared test classes
    testCompile project(':common:common-api').sourceSets.test.output
    testCompile project(':rm:rm-policy:rm-policy-scheduler')
    testCompile project(':scheduler:scheduler-examples')

    runtime 'org.hsqldb:hsqldb:2.4.0'

    runtime "org.objectweb.proactive:programming-extension-pnp:${programmingVersion}"
    runtime "org.objectweb.proactive:programming-extension-pnpssl:${programmingVersion}"
    runtime "org.objectweb.proactive:programming-extension-pamr:${programmingVersion}"

    runtime project(':rest:rest-server')

    runtime 'com.googlecode.grep4j:grep4j:1.8.7'
}

task justprint {
    //println sourceSets.main.runtimeClasspath.asPath
    println sourceSets.test.runtimeClasspath.asPath
}

task('functionalTest', type: Test).configure schedulingFunctionalTestConfiguration

//task('performanceTest').configure schedulingPerformanceTestConfiguration



/**
 * The whole idea is to have peformancetests/* tests which are run by JMeter.
 * Run performanceTest task:
 * it creates junit-performance-tests.jar with performance tests and all our project,
 * then it runs jmRun task of jmeter-gradle-plugin.
 * Which takes our prepared plan myverytest.jmx (where is specified which tests to launch).
 * So JMeter executes tests specified in myverytest.jmx and provided in junit-performance-tests.jar
 * So final report stored â€¦ and goes to Jenkins
 */
apply plugin: "net.foragerr.jmeter"


task rr {
    println "BEFORE"
    println "user.classpath=" + rootProject.sourceSets.test.runtimeClasspath.asPath
    println "AFTER"
}
/**
 * Task which should be called to execute performance tests.
 * It configures jmeter-gradle-plugin and it is followed by jmRun (plugin task to run all tests)
 */
task performanceTestRun {
//    dependsOn performanceTestJar

    jmeter {
        // file path to log
        jmLog = file("${buildDir}/resources/test/jmeter/jmeter.log")

        // plan which should be executed by JMeter
        jmTestFiles = [file("src/test/resources/performancetests/jmeter/performance-java-plan.jmx")]

//        jmUserProperties=["user.classpath=/home/Gleb/git/fork/jrochas/scheduling/rm/rm-client/build/classes/main:" + sourceSets.test.runtimeClasspath.asPath ]
        jmUserProperties=["user.classpath=/home/Gleb/git/fork/jrochas/scheduling/dist/lib/*:/home/Gleb/git/fork/jrochas/scheduling/addons/*:/home/Gleb/idea-IC-172.4343.14/lib/idea_rt.jar:/home/Gleb/idea-IC-172.4343.14/plugins/junit/lib/junit-rt.jar:/home/Gleb/idea-IC-172.4343.14/plugins/junit/lib/junit5-rt.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/charsets.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/ext/cldrdata.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/ext/dnsns.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/ext/jaccess.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/ext/localedata.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/ext/nashorn.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/ext/sunec.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/ext/sunjce_provider.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/ext/sunpkcs11.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/ext/zipfs.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/jce.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/jsse.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/management-agent.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/resources.jar:/usr/lib/jvm/java-1.8.0-openjdk/jre/lib/rt.jar:/home/Gleb/git/fork/jrochas/scheduling/scheduler/scheduler-server/out/test/classes:/home/Gleb/git/fork/jrochas/scheduling/scheduler/scheduler-server/out/test/resources:/home/Gleb/git/fork/jrochas/scheduling/rm/rm-server/out/test/classes:/home/Gleb/git/fork/jrochas/scheduling/rm/rm-server/out/test/resources:/home/Gleb/git/fork/jrochas/scheduling/common/common-api/out/test/classes:/home/Gleb/git/fork/jrochas/scheduling/common/common-api/out/test/resources:/home/Gleb/git/fork/jrochas/scheduling/dist/lib/META-INF/MANIFEST.MF:/usr/local/java/jdk1.8.0_131/lib/tools.jar:/home/Gleb/git/fork/jrochas/scheduling/common/common-api/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/common/common-client/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/common/common-client/out/production/resources:/home/Gleb/git/fork/jrochas/scheduling/common/common-db/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/common/common-http/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/scheduler/scheduler-api/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/scheduler/scheduler-api/out/production/resources:/home/Gleb/git/fork/jrochas/scheduling/scheduler/scheduler-client/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/scheduler/scheduler-node/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/scheduler/scheduler-node/out/production/resources:/home/Gleb/git/fork/jrochas/scheduling/rm/rm-server/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/rm/rm-client/out/production/classes:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.google.truth/truth/0.27/bd17774d2dc0fffa884d42c07d2537e86c67acd6/truth-0.27.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/junit/junit/4.12/2973d150c0dc1fefe998f834810d68f278ea58ec/junit-4.12.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-junit/2.0.0.0/221cf2b5aabedf8cd76534996caa21b283ea5d0/hamcrest-junit-2.0.0.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.mockito/mockito-core/1.10.19/e8546f5bef4e061d8dd73895b4e8f40e3fe6effe/mockito-core-1.10.19.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/ObjectFaker/ObjectFaker/0.1/22486db5f820c918fbe20593f4129b118cca88ba/ObjectFaker-0.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.jayway.awaitility/awaitility/1.6.0/76c421634706e8ef1f026b32e05d311a71fca19/awaitility-1.6.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.google.jimfs/jimfs/1.1/8fbd0579dc68aba6186935cc1bee21d2f3e7ec1c/jimfs-1.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-all/1.3/63a21ebc981131004ad02e0434e799fd7f3a8d5a/hamcrest-all-1.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.jmeter/ApacheJMeter_junit/3.3/195173bfdd03b6fdd5624dc5cfb3d52a65785c4b/ApacheJMeter_junit-3.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.jmeter/ApacheJMeter_java/3.3/58e4c79553318063a8578c45d4df2391b46cb1c/ApacheJMeter_java-3.3.jar:/home/Gleb/git/fork/jrochas/scheduling/rm/rm-policy/rm-policy-scheduler/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/scheduler/scheduler-examples/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/rest/rest-client/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/rm/rm-node/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/rm/rm-node/out/production/resources:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.hamcrest/java-hamcrest/2.0.0.0/f1c8853ade0ecf707f5a261c830e98893983813/java-hamcrest-2.0.0.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.objenesis/objenesis/2.1/87c0ea803b69252868d09308b4618f766f135a96/objenesis-2.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-library/1.3/4785a3c21320980282f9f33d0d1264a69040538f/hamcrest-library-1.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/cglib/cglib-nodep/3.1/aa83efbd1aedc4f26bdf00e7ea78191483f2c9b3/cglib-nodep-3.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.jmeter/jorphan/3.3/753bb718a0ad1105d2002907574441848c9c1d63/jorphan-3.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.jmeter/ApacheJMeter_core/3.3/a7e904b65a8f291763e3df6fd1514b633a46a30b/ApacheJMeter_core-3.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.ow2.asm/asm/5.2/4ce3ecdc7115bcbf9d4ff4e6ec638e60760819df/asm-5.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/net.minidev/accessors-smart/1.2/c592b500269bfde36096641b01238a8350f8aa31/accessors-smart-1.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/bsf/bsf/2.4.0/658f324024bb473c4d15d18b855676fa817353e9/bsf-2.4.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.beanshell/bsh/2.0b5/fdc2ab6ae8b53e0d4761b296c116df747cd85199/bsh-2.0b5.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.brotli/dec/0.1.2/c26a897ae0d524809eef1c786cc6183b4ddcc3b/dec-0.1.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.github.ben-manes.caffeine/caffeine/2.5.5/3b7a61b4dd2a3b4e0aa5b500aaefaa5cd4beb76f/caffeine-2.5.5.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/commons-collections/commons-collections/3.2.2/8ad72fe39fa8c91eaaf12aadb21e0c3661fe26d5/commons-collections-3.2.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-dbcp2/2.1.1/c4f4a76171671ccf293be8995a498eab7fa8ed24/commons-dbcp2-2.1.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-jexl/2.1.1/6ecc181debade00230aa1e17666c4ea0371beaaa/commons-jexl-2.1.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-jexl3/3.1/a905d9655c30a9b7cfd1d11473b059c72283c888/commons-jexl3-3.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-math3/3.6.1/e4ba98f1d4b3c80ec46392f25e094a6a2e58fcbf/commons-math3-3.6.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/commons-net/commons-net/3.6/b71de00508dcb078d2b24b5fa7e538636de9b3da/commons-net-3.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-pool2/2.4.2/e5f4f28f19d57716fbc3989d7a357ebf1e454fea/commons-pool2-2.4.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/dnsjava/dnsjava/2.1.8/eed8a2cbf56cc60d07a189a429ead3067564193c/dnsjava-2.1.8.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpasyncclient/4.1.3/34c56f43fd3255fc239ffe33d0fbfb8195be6a24/httpasyncclient-4.1.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpmime/4.5.3/889fd6d061bb63b99dd5c6aba35a555ae863de52/httpmime-4.5.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpcore/4.4.7/5442c20f3568da63b17e0066b06cd88c2999dc14/httpcore-4.4.7.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpcore-nio/4.4.7/23034f2cb559a93df431ea64d98d3029c88c468/httpcore-nio-4.4.7.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/oro/oro/2.0.8/5592374f834645c4ae250f4c9fbb314c9369d698/oro-2.0.8.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/jcharts/jcharts/0.7.5/496f4515d4eae91a43bde1bc7a965fba500acbbc/jcharts-0.7.5.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.mozilla/rhino/1.7.7.1/2e8f8ebc42e5df8bcef5c78dd44387176c9aa98e/rhino-1.7.7.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/net.sf.jtidy/jtidy/r938/ab08d87a225a715a69107732b67f21e1da930349/jtidy-r938.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.tika/tika-core/1.16/7b75cb2b65f6d014b6a3e4793835f5759168c34e/tika-core-1.16.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.tika/tika-parsers/1.16/bececafbe32c013eae8d3f3cf10d28b136a6f9d7/tika-parsers-1.16.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.thoughtworks.xstream/xstream/1.4.10/dfecae23647abc9d9fd0416629a4213a3882b101/xstream-1.4.10.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/xmlpull/xmlpull/1.1.3.1/2b8e230d2ab644e4ecaa94db7cdedbc40c805dfa/xmlpull-1.1.3.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/xpp3/xpp3_min/1.1.4c/19d4e90b43059058f6e056f794f0ea4030d60b86/xpp3_min-1.1.4c.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/xalan/xalan/2.7.2/d55d3f02a56ec4c25695fe67e1334ff8c2ecea23/xalan-2.7.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/xalan/serializer/2.7.2/24247f3bb052ee068971393bdb83e04512bb1c3c/serializer-2.7.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/xmlgraphics-commons/2.2/89f22650b8b8a5ac91207bf58190df852d97415a/xmlgraphics-commons-2.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.geronimo.specs/geronimo-jms_1.1_spec/1.1.1/c872b46c601d8dc03633288b81269f9e42762cea/geronimo-jms_1.1_spec-1.1.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.jayway.jsonpath/json-path/2.4.0/765a4401ceb2dc8d40553c2075eb80a8fa35c2ae/json-path-2.4.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/net.minidev/json-smart/2.3/7396407491352ce4fa30de92efb158adb76b5b/json-smart-2.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.jsoup/jsoup/1.10.3/b842f960942503cf1abbcc8c173a7f2c19d43726/jsoup-1.10.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.jodd/jodd-core/3.8.6/b098f1eeb2bf7860c1d76e3c2b82c93c8b7c36ee/jodd-core-3.8.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.jodd/jodd-lagarto/3.8.6/997cd23a7c05cc9c9a55474ba45a0a8078a5d652/jodd-lagarto-3.8.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.jodd/jodd-log/3.8.6/a0135c64288a08c0d8574fed396086485e0122cb/jodd-log-3.8.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.jodd/jodd-props/3.8.6/4f74a6be1e80138798432c1a794e2b3e994bcad0/jodd-props-3.8.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.mongodb/mongo-java-driver/2.11.3/8a6dd3000edcc9eb18c51ebb01a42186411ccc08/mongo-java-driver-2.11.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.helger/ph-css/5.0.4/c5cbff504d46c46cc8abb315e2aae8f22ef31eb4/ph-css-5.0.4.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.helger/ph-commons/8.6.6/2c11690e44fd15611985d2bb8a1bf2b559c88cce/ph-commons-8.6.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.fifesoft/rsyntaxtextarea/2.6.1/f12ae07aafc7fdc6939203b19b0bed8b1de32671/rsyntaxtextarea-2.6.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-api/1.7.25/da76ca59f6a57ee3102f8f9bd9cee742973efa8a/slf4j-api-1.7.25.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-ext/1.7.25/d1685f86e2becda32ad8bb823b8cc4990eb45f69/slf4j-ext-1.7.25.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.slf4j/jcl-over-slf4j/1.7.25/f8c32b13ff142a513eeb5b6330b1588dcb2c0461/jcl-over-slf4j-1.7.25.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-api/2.8.2/e590eeb783348ce8ddef205b82127f9084d82bf3/log4j-api-2.8.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-core/2.8.2/979fc0cf8460302e4ffbfe38c1b66a99450b0bb7/log4j-core-2.8.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-slf4j-impl/2.8.2/36bc2a99b86be26ccdc51fe288458dc712d280c1/log4j-slf4j-impl-2.8.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-1.2-api/2.8.2/f1543534b8413aac91fa54d1fff65dfff76818cd/log4j-1.2-api-2.8.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.freemarker/freemarker/2.3.23/cd143cd8c02a9f838e3cb75a6dfe133750437f6d/freemarker-2.3.23.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.exparity/hamcrest-date/2.0.4/c8e8c2812d09229412e04950d455cd43b4771abf/hamcrest-date-2.0.4.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.jmeter/ApacheJMeter_components/3.3/a6802a7c2e45cde6e2d28aeb80112673d7c3905e/ApacheJMeter_components-3.3.jar:/home/Gleb/git/fork/jrochas/scheduling/scheduler/scheduler-server/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/rest/rest-api/out/production/classes:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.gagravarr/vorbis-java-tika/0.8/4ddbb27ac5884a0f0398a63d46a89d3bc87dc457/vorbis-java-tika-0.8.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.healthmarketscience.jackcess/jackcess/2.1.8/dfc7156e11ce33bbcb7f4f6724a87b9d969f2fd6/jackcess-2.1.8.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.healthmarketscience.jackcess/jackcess-encrypt/2.1.2/c11d7a42af7070b84d832198558df52032de734c/jackcess-encrypt-2.1.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.tallison/jmatio/1.2/69d8f2f49c1503f9b15b0eb50b1905a734a025e2/jmatio-1.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.james/apache-mime4j-core/0.8.1/c62dfe18a3b827a2c626ade0ffba44562ddf3f61/apache-mime4j-core-0.8.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.james/apache-mime4j-dom/0.8.1/f2d653c617004193f3350330d907f77b60c88c56/apache-mime4j-dom-0.8.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-compress/1.14/7b18320d668ab080758bf5383d6d8fcf750babce/commons-compress-1.14.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.tukaani/xz/1.6/5b6f921f1810bdf90e25471968f741f87168b64/xz-1.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.pdfbox/pdfbox/2.0.6/68616a583c5f9b9ba72140364d15a07cd937ce0e/pdfbox-2.0.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.pdfbox/pdfbox-tools/2.0.6/3b0c2622015c048a29496291cfe44f235f5c7cdf/pdfbox-tools-2.0.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.pdfbox/jempbox/1.8.13/a874cef0ed0e2a8c4cc5ed52c23ba3e6d78eca4e/jempbox-1.8.13.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.poi/poi/3.17-beta1/d2df762cc8301c257db1fd0f4fc2f37ed9fbbb78/poi-3.17-beta1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.poi/poi-scratchpad/3.17-beta1/d4ad39b023c377ec534ab25205344eb79da4996b/poi-scratchpad-3.17-beta1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.poi/poi-ooxml/3.17-beta1/96f537614c5f5ec232fb8832313280dcb93c59ab/poi-ooxml-3.17-beta1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.ccil.cowan.tagsoup/tagsoup/1.2.1/5584627487e984c03456266d3f8802eb85a9ce97/tagsoup-1.2.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.googlecode.mp4parser/isoparser/1.1.18/c74bdac64b22f1e245a7657149a43437aae4a9d3/isoparser-1.1.18.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.drewnoakes/metadata-extractor/2.9.1/53fdf22be10c9d426ec63431c7342895bc642261/metadata-extractor-2.9.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/de.l3s.boilerpipe/boilerpipe/1.1.0/f62cb75ed52455a9e68d1d05b84c500673340eb2/boilerpipe-1.1.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.rometools/rome/1.5.1/cc3489f066749bede7fc81f4e80c0d8c9534a210/rome-1.5.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.gagravarr/vorbis-java-core/0.8/7e9937c2575cda2e3fc116415117c74f23e43fa6/vorbis-java-core-0.8.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.googlecode.juniversalchardet/juniversalchardet/1.0.3/cd49678784c46aa8789c060538e0154013bb421b/juniversalchardet-1.0.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.codelibs/jhighlight/1.0.2/992a8a8add10468930efc1f110f2895f68258a1e/jhighlight-1.0.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.pff/java-libpst/0.8.1/ad31986653dac9cb5132ea5b2999c20b4b286255/java-libpst-0.8.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.github.junrar/junrar/0.7/18cc717b85af0b12ba922abf415c2ff4716f8219/junrar-0.7.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.cxf/cxf-rt-rs-client/3.0.12/af609cc16e80eb05e20c8bbf60da24416d9a9b9d/cxf-rt-rs-client-3.0.12.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-exec/1.3/8dfb9facd0830a27b1b5f29f84593f0aeee7773b/commons-exec-1.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.opennlp/opennlp-tools/1.6.0/e89fc5317497ee3ed0e6c48a72e4f280961a02b4/opennlp-tools-1.6.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.googlecode.json-simple/json-simple/1.1.1/c9ad4a0850ab676c5c64461a05ca524cdfff59f1/json-simple-1.1.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.tdunning/json/1.8/fa57d5adf557b226738cd42e6c093dd0a76c5fd4/json-1.8.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.google.code.gson/gson/2.8.1/2a8e0aa38a2e21cb39e2f5a7d6704cbdc941da0/gson-2.8.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.slf4j/jul-to-slf4j/1.7.24/25a2be668cb2ad1d05d76c0773df73b4b53617fd/jul-to-slf4j-1.7.24.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/edu.ucar/netcdf4/4.5.5/675d63ecc857c50dd50858011b670160aa30b62/netcdf4-4.5.5.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/edu.ucar/grib/4.5.5/cfe552910e9a8d57ce71134796abb281a74ead16/grib-4.5.5.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/edu.ucar/cdm/4.5.5/af1748a3d024069cb7fd3fc2591efe806c914589/cdm-4.5.5.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/edu.ucar/httpservices/4.5.5/ee5f217be599e5e03f7f0e55e03f9e721a154f62/httpservices-4.5.5.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-csv/1.0/8a0796ad6541a144eb1c00b93e06fbac03a9f313/commons-csv-1.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.sis.core/sis-utility/0.6/e049cdb56758f3a92b48af0f7741d102a90152/sis-utility-0.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.sis.storage/sis-netcdf/0.6/c847a664eb707b0663dec4a9257419842a33e903/sis-netcdf-0.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.sis.core/sis-metadata/0.6/97cde9b02f2548567a06f3ecd42caa39a94ffaf4/sis-metadata-0.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.opengis/geoapi/3.0.0/a04e0f361627fb33a140b5aa4c019741f905577/geoapi-3.0.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/edu.usc.ir/sentiment-analysis-parser/0.1/20d1524a1270c1d26e3314d2ee71a12e6a29a27d/sentiment-analysis-parser-0.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.fasterxml.jackson.core/jackson-core/2.8.1/fd13b1c033741d48291315c6370f7d475a42dccf/jackson-core-2.8.1.jar:/home/Gleb/git/fork/jrochas/scheduling/rest/rest-server/out/production/classes:/home/Gleb/git/fork/jrochas/scheduling/rest/rest-server/out/production/resources:/home/Gleb/.gradle/caches/modules-2/files-2.1/commons-lang/commons-lang/2.6/ce1edb914c94ebc388f086c6827e8bdeec71ac2/commons-lang-2.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.pdfbox/fontbox/2.0.6/33f44ea67f1b5ab314e2d5768365b1a3e794fb3b/fontbox-2.0.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.pdfbox/pdfbox-debugger/2.0.6/8691431b419692d58640de8428ce35d03fa1770d/pdfbox-debugger-2.0.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.poi/poi-ooxml-schemas/3.17-beta1/99811dc063afea4cde813726ba6f45f724bf2c3b/poi-ooxml-schemas-3.17-beta1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.github.virtuald/curvesapi/1.04/3386abf821719bc89c7685f9eaafaf4a842f0199/curvesapi-1.04.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.adobe.xmp/xmpcore/5.1.2/55615fa2582424e38705487d1d3969af8554f637/xmpcore-5.1.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.rometools/rome-utils/1.5.1/3a3d6473a2f5d55fb31bf6c269af963fdea13b54/rome-utils-1.5.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.cxf/cxf-rt-transports-http/3.0.12/e2eedc03de7f1cda7e94e2af2685f9124c668fd5/cxf-rt-transports-http-3.0.12.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.cxf/cxf-core/3.0.12/7c7beb6875fb180cc5813bfa85456f92b5b62505/cxf-core-3.0.12.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.cxf/cxf-rt-frontend-jaxrs/3.0.12/30a94ced70c56464c8a1f2c409f33c403afa24ec/cxf-rt-frontend-jaxrs-3.0.12.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protobuf-java/2.5.0/a10732c76bfacdbd633a7eb0f7968b1059a65dfa/protobuf-java-2.5.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.jdom/jdom2/2.0.4/4b65e55cc61b34bc634b25f0359d1242e4c519de/jdom2-2.0.4.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.itadaki/bzip2/0.9.1/47ca95f71e3ccae756c4a24354d48069c58f475c/bzip2-0.9.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/edu.ucar/udunits/4.5.5/d8c8d65ade13666eedcf764889c69321c247f153/udunits-4.5.5.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.quartz-scheduler/quartz/2.2.0/2eb16fce055d5f3c9d65420f6fc4efd3a079a3d8/quartz-2.2.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/net.sf.ehcache/ehcache-core/2.6.2/3baecd92015a9f8fe4cf51c8b5d3a5bddcdd3e86/ehcache-core-2.6.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.beust/jcommander/1.35/47592e181b0bdbbeb63029e08c5e74f6803c4edd/jcommander-1.35.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.sis.storage/sis-storage/0.6/1996e6209d309380cd191d4483ca19cc25c30fe3/sis-storage-0.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.sis.core/sis-referencing/0.6/ca59408047b7c3685661959b5858297e047a4046/sis-referencing-0.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/javax.measure/jsr-275/0.9.3/ab2fb094fc5297ae5636ef6ed0d6051d5a656588/jsr-275-0.9.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.xmlbeans/xmlbeans/2.6.0/29e80d2dd51f9dcdef8f9ffaee0d4dc1c9bbfc87/xmlbeans-2.6.0.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.codehaus.woodstox/woodstox-core-asl/4.4.1/84fee5eb1a4a1cefe65b6883c73b3fa83be3c1a1/woodstox-core-asl-4.4.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.ws.xmlschema/xmlschema-core/2.2.1/2eff1f3776590d4c51cc735eab2143c497329f2/xmlschema-core-2.2.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/javax.ws.rs/javax.ws.rs-api/2.0.1/104e9c2b5583cfcfeac0402316221648d6d8ea6b/javax.ws.rs-api-2.0.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/javax.annotation/javax.annotation-api/1.2/479c1e06db31c432330183f5cae684163f186146/javax.annotation-api-1.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/c3p0/c3p0/0.9.1.1/302704f30c6e7abb7a0457f7771739e03c973e80/c3p0-0.9.1.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-core/1.3/42a25dc3219429f0e5d060061f71acb49bf010a0/hamcrest-core-1.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-lang3/3.6/9d28a6b23650e8a7e9063c04588ace6cf7012c17/commons-lang3-3.6.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpclient/4.5.3/d1577ae15f01ef5438c5afc62162457c00a34713/httpclient-4.5.3.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/javax.mail/mail/1.5.0-b01/c128515e42609622ce3f7dc0b431026d80bdb688/mail-1.5.0-b01.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.bouncycastle/bcmail-jdk15on/1.54/9d9b5432b4b29ef4a853223bc6e19379ef116cca/bcmail-jdk15on-1.54.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.bouncycastle/bcprov-jdk15on/1.54/1acdedeb89f1d950d67b73d481eb7736df65eedb/bcprov-jdk15on-1.54.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/com.google.code.findbugs/jsr305/3.0.2/25ea2e8b0c338a877313bd4672d3fe056ea78f0d/jsr305-3.0.2.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-collections4/4.1/a4cf4688fe1c7e3a63aa636cc96d013af537768e/commons-collections4-4.1.jar:/home/Gleb/.gradle/caches/modules-2/files-2.1/org.bouncycastle/bcpkix-jdk15on/1.54/b11bfee99bb11eea344de6e4a07fe89212c55c02/bcpkix-jdk15on-1.54.jar:/home/Gleb/idea-IC-172.4343.14/lib/idea_rt.jar, -Djava.awt.headless=true, -Djava.library.path=/home/Gleb/idea-IC-172.4343.14/bin:/home/Gleb/idea-IC-172.4343.14/bin:/home/Gleb/idea-IC-172.4343.14/bin:/home/Gleb/idea-IC-172.4343.14/bin:/home/Gleb/idea-IC-172.4343.14/bin::/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib"]
        jmSystemProperties = [

                '-Djava.security.manager',
                '-Dfile.encoding=UTF-8',
                "-Dproactive.home=$rootDir",
                "-Dpa.scheduler.home=$rootDir",
                "-Dpa.rm.home=$rootDir",
                '-Dproactive.communication.protocol=pnp',
                "-Dlog4j.configuration=file:$rootDir/rm/rm-server/out/test/resources/log4j-junit",
//                '-Dproactive.pnp.port=1199', // 1199
//                "-Djava.library.path=$rootDir/dist/lib",
//                "-Djava.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib",
                "-Djava.security.policy=$rootDir/config/security.java.policy-server",
                "-Djava.library.path=" + project.nativeLibsDir +

                '-XX:+UseG1GC',
                '-XX:+UseStringDeduplication',
                '-XX:+AggressiveOpts',
                '-XX:+ExitOnOutOfMemoryError',
                '-XX:-UseGCOverheadLimit'
        ]

//        -Djava.library.path=:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib


        enableReports = true
        enableExtendedReports = false
    }
    /**
     * in order to run tests it is necessary to run jmRun task of jmeter-gradle-plugin
     */
    finalizedBy jmRun
}

task performanceTest {
    dependsOn performanceTestRun
    finalizedBy jmReport
}


task testJar(type: Jar) {
    classifier = 'tests'
    from sourceSets.test.output
}


task stub(type: StubTask) {
    classes = [
            'org.ow2.proactive.scheduler.authentication.SchedulerAuthentication',
            'org.ow2.proactive.scheduler.core.rmproxies.RMProxyActiveObject',
            'org.ow2.proactive.scheduler.core.SchedulerFrontend',
            'org.ow2.proactive.scheduler.core.TerminateNotification'
    ]
}
serialver.dependsOn stub

rootProject.dist.dependsOn testJar

task dist(type: Copy) {
    from testJar
    into file("$rootDir/dist/lib")
}

dist.dependsOn project(':rm:rm-server').dist

artifacts {
    archives testJar
}

functionalTest.dependsOn rootProject.dist, dist
performanceTest.dependsOn rootProject.dist, dist

clean.dependsOn rootProject.cleanDist
